import{e as K}from"./chunk-JTRDO5AI.js";import{$ as P,A as p,Aa as z,Ba as H,Ca as S,E as I,Ea as x,F as f,Ga as y,H as r,J as w,Ja as J,L as M,Q as u,X as U,Z as T,ha as F,i as E,ia as v,ja as q,ka as D,m as C,ma as L,o as g,oa as k,p as h,pa as R,qa as j,ra as A,sa as V,t as a,u as c,v as d,va as G,w as m,xa as O,y as i,z as t,za as B}from"./chunk-5BKUYLAT.js";var W=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(s,n){s&1&&(i(0,"div",0)(1,"div",1),p(2,"router-outlet"),t()())},dependencies:[z],encapsulation:2})}}return e})();var X=(()=>{class e{constructor(o){this.accountService=o,this.account=this.accountService.accountValue}static{this.\u0275fac=function(s){return new(s||e)(c(y))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:15,vars:4,consts:[[1,"profile-container"],[1,"profile-card"],[1,"profile-info"],["routerLink","update",1,"profile-btn"]],template:function(s,n){s&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),r(3,"My Profile"),t(),i(4,"div",2)(5,"div")(6,"strong"),r(7,"Name:"),t(),r(8),t(),i(9,"div")(10,"strong"),r(11,"Email:"),t(),r(12),t()(),i(13,"a",3),r(14,"Update Profile"),t()()()),s&2&&(a(8),M(" ",n.account.title," ",n.account.firstName," ",n.account.lastName,""),a(4),w(" ",n.account.email,""))},dependencies:[S],encapsulation:2})}}return e})();var _=e=>({"is-invalid":e});function te(e,l){e&1&&(i(0,"div"),r(1,"Title is required"),t())}function ie(e,l){if(e&1&&(i(0,"div",22),d(1,te,2,0,"div",23),t()),e&2){let o=f();a(),m("ngIf",o.f.title.errors.required)}}function ne(e,l){e&1&&(i(0,"div"),r(1,"First Name is required"),t())}function re(e,l){if(e&1&&(i(0,"div",22),d(1,ne,2,0,"div",23),t()),e&2){let o=f();a(),m("ngIf",o.f.firstName.errors.required)}}function oe(e,l){e&1&&(i(0,"div"),r(1,"Last Name is required"),t())}function ae(e,l){if(e&1&&(i(0,"div",22),d(1,oe,2,0,"div",23),t()),e&2){let o=f();a(),m("ngIf",o.f.lastName.errors.required)}}function me(e,l){e&1&&(i(0,"div"),r(1,"Email is required"),t())}function se(e,l){e&1&&(i(0,"div"),r(1,"Email must be valid email address"),t())}function le(e,l){if(e&1&&(i(0,"div",22),d(1,me,2,0,"div",23)(2,se,2,0,"div",23),t()),e&2){let o=f();a(),m("ngIf",o.f.email.errors.required),a(),m("ngIf",o.f.email.errors.email)}}function de(e,l){e&1&&(i(0,"div"),r(1,"Password is required"),t())}function pe(e,l){e&1&&(i(0,"div"),r(1,"Password must be at least 6 characters"),t())}function ce(e,l){if(e&1&&(i(0,"div",22),d(1,de,2,0,"div",23)(2,pe,2,0,"div",23),t()),e&2){let o=f();a(),m("ngIf",o.f.password.errors.required),a(),m("ngIf",o.f.password.errors.minlength)}}function fe(e,l){e&1&&(i(0,"div"),r(1,"Confirm Password is required"),t())}function ue(e,l){e&1&&(i(0,"div"),r(1,"Passwords must match"),t())}function ve(e,l){if(e&1&&(i(0,"div",22),d(1,fe,2,0,"div",23)(2,ue,2,0,"div",23),t()),e&2){let o=f();a(),m("ngIf",o.f.confirmPassword.errors.required),a(),m("ngIf",o.f.confirmPassword.errors.mustMatch)}}function ge(e,l){e&1&&p(0,"span",24)}var Y=(()=>{class e{constructor(o,s,n,N,$){this.formBuilder=o,this.route=s,this.router=n,this.accountService=N,this.alertService=$,this.account=this.accountService.accountValue,this.loading=!1,this.submitted=!1,this.deleting=!1}ngOnInit(){this.form=this.formBuilder.group({title:[this.account.title,v.required],firstName:[this.account.firstName,v.required],lastName:[this.account.lastName,v.required],email:[this.account.email,[v.required,v.email]],password:["",[v.minLength(6)]],confirmPassword:[""]},{validators:K("password","confirmPassword")})}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.loading=!0,this.accountService.update(this.account.id,this.form.value).pipe(E()).subscribe({next:()=>{this.alertService.success("Update Successful",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})},error:o=>{this.alertService.error(o),this.loading=!1}}))}onDelete(){confirm("Are you sure?")&&(this.deleting=!0,this.accountService.delete(this.account.id).pipe(E()).subscribe(()=>{this.alertService.success("Account deleted successfully",{keepAfterRouteChange:!0})}))}static{this.\u0275fac=function(s){return new(s||e)(c(G),c(B),c(H),c(y),c(J))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:54,vars:27,consts:[[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],[1,"pt-3"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"fore-group"],["type","submit",1,"btn","btn-primary","mr-2",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","../","href","",1,"btn","btn-link"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(s,n){s&1&&(i(0,"h1"),r(1,"Update Profile"),t(),i(2,"form",0),I("ngSubmit",function(){return n.onSubmit()}),i(3,"div",1)(4,"div",2)(5,"label"),r(6,"Title"),t(),i(7,"select",3),p(8,"option",4),i(9,"option",5),r(10,"Mr"),t(),i(11,"option",6),r(12,"Mrs"),t(),i(13,"option",7),r(14,"Miss"),t(),i(15,"option",8),r(16,"Ms"),t()(),d(17,ie,2,1,"div",9),t(),i(18,"div",10)(19,"label"),r(20,"First Name"),t(),p(21,"input",11),d(22,re,2,1,"div",9),t(),i(23,"div",10)(24,"label"),r(25,"Last Name"),t(),p(26,"input",12),d(27,ae,2,1,"div",9),t()(),i(28,"div",13)(29,"label"),r(30,"Email"),t(),p(31,"input",14),d(32,le,3,2,"div",9),t(),i(33,"h3",15),r(34,"Change Password"),t(),i(35,"p"),r(36,"Leave blank to keep the same password"),t(),i(37,"div",1)(38,"div",2)(39,"label"),r(40,"Password"),t(),p(41,"input",16),d(42,ce,3,2,"div",9),t(),i(43,"div",2)(44,"label"),r(45,"Confirm Password"),t(),p(46,"input",17),d(47,ve,3,2,"div",9),t()(),i(48,"div",18)(49,"button",19),d(50,ge,1,0,"span",20),r(51," Update "),t(),i(52,"a",21),r(53,"Cancel"),t()()()),s&2&&(a(2),m("formGroup",n.form),a(5),m("ngClass",u(15,_,n.submitted&&n.f.title.errors)),a(10),m("ngIf",n.submitted&&n.f.title.errors),a(4),m("ngClass",u(17,_,n.submitted&&n.f.firstName.errors)),a(),m("ngIf",n.submitted&&n.f.firstName.errors),a(4),m("ngClass",u(19,_,n.submitted&&n.f.lastName.errors)),a(),m("ngIf",n.submitted&&n.f.lastName.errors),a(4),m("ngClass",u(21,_,n.submitted&&n.f.email.errors)),a(),m("ngIf",n.submitted&&n.f.email.errors),a(9),m("ngClass",u(23,_,n.submitted&&n.f.password.errors)),a(),m("ngIf",n.submitted&&n.f.password.errors),a(4),m("ngClass",u(25,_,n.submitted&&n.f.confirmPassword.errors)),a(),m("ngIf",n.submitted&&n.f.confirmPassword.errors),a(2),m("disabled",n.loading),a(),m("ngIf",n.loading))},dependencies:[U,T,S,L,A,V,F,j,q,D,k,R],encapsulation:2})}}return e})();var _e=[{path:"",component:W,children:[{path:"",component:X},{path:"update",component:Y}]}],Z=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=C({imports:[x.forChild(_e),x]})}}return e})();var Ve=(()=>{class e{static{this.\u0275fac=function(s){return new(s||e)}}static{this.\u0275mod=h({type:e})}static{this.\u0275inj=C({imports:[P,Z,O]})}}return e})();export{Ve as ProfileModule};
