import{$ as ae,A as y,B as ie,Ba as P,C as ne,Ca as pe,D as E,E as h,Ea as L,F as c,Ga as Q,H as l,I as b,Ia as ce,J as k,Ja as V,K as B,Ka as F,La as ue,M as S,Ma as x,N as I,O as C,Q as D,T as re,U as oe,W as le,X as $,Y as T,Z as N,_ as se,a as ee,b as te,c as W,e as j,g as U,ha as de,i as g,ja as H,la as J,m as R,o as A,p as q,q as _,qa as z,r as v,ra as Y,sa as G,t as s,u,v as f,w as m,wa as me,y as o,z as i,za as K}from"./chunk-5BKUYLAT.js";var O=n=>({"is-invalid":n});function Ie(n,p){if(n&1){let e=E();o(0,"div",23)(1,"strong"),l(2,"Error:"),i(),l(3),o(4,"button",24),h("click",function(){_(e);let t=c();return v(t.clearError())}),i()()}if(n&2){let e=c();s(3),k(" ",e.errorMessage," ")}}function Ce(n,p){if(n&1){let e=E();o(0,"div",25),l(1),o(2,"button",26),h("click",function(){_(e);let t=c();return v(t.clearSuccess())}),i()()}if(n&2){let e=c();s(),k(" ",e.successMessage," ")}}function xe(n,p){n&1&&(o(0,"small",16),l(1," Automatically generated. Admin users can modify if needed. "),i())}function we(n,p){n&1&&(o(0,"div",27),l(1,"Employee ID is required"),i())}function Me(n,p){n&1&&(ie(0),l(1," [INACTIVE]"),ne())}function De(n,p){if(n&1&&(o(0,"option",28),l(1),f(2,Me,2,0,"ng-container",29),i()),n&2){let e=p.$implicit;m("value",e.id),s(),B(" ",e.email," (",e.role,") "),s(),m("ngIf",e.isActive===!1)}}function Ae(n,p){n&1&&(o(0,"div",27),l(1,"Account is required"),i())}function ke(n,p){n&1&&(o(0,"div",27),l(1,"Position is required"),i())}function Te(n,p){if(n&1&&(o(0,"option",28),l(1),i()),n&2){let e=p.$implicit;m("value",e.id),s(),b(e.name)}}function Ne(n,p){n&1&&(o(0,"div",27),l(1,"Department is required"),i())}function Pe(n,p){n&1&&(o(0,"div",27),l(1,"Hire date is required"),i())}function Ve(n,p){n&1&&(o(0,"div",27),l(1,"Status is required"),i())}var Z=(()=>{class n{constructor(e,r,t,a,d,w,M){this.router=e,this.route=r,this.employeeService=t,this.departmentService=a,this.accountService=d,this.alertService=w,this.location=M,this.isEditMode=!1,this.employee={employeeId:"",userId:null,position:"",departmentId:null,hireDate:"",status:"Active"},this.errorMessage="",this.successMessage="",this.users=[],this.departments=[],this.allEmployees=[],this.availableUsers=[],this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isEditMode=!!this.id,this.departmentService.getAll().pipe(g()).subscribe({next:e=>this.departments=e,error:e=>this.alertService.error("Error loading departments: "+e)}),this.accountService.getAll().pipe(g()).subscribe({next:e=>{this.users=e,this.loadEmployeesForFiltering()},error:e=>this.alertService.error("Error loading users: "+e)}),this.isEditMode?this.employeeService.getById(this.id).pipe(g()).subscribe({next:e=>this.employee=e,error:e=>{this.alertService.error("Error loading employee: "+e),this.errorMessage="Could not load employee data"}}):this.employeeService.getAll().pipe(g()).subscribe({next:e=>{this.allEmployees=e,this.generateEmployeeId()}})}save(){if(this.submitted=!0,this.clearMessages(),this.isFormInvalid()){this.errorMessage="Please complete all required fields before saving.";return}try{this.id?this.employeeService.update(this.id,this.employee).pipe(g()).subscribe({next:()=>{this.successMessage="Employee updated successfully",setTimeout(()=>this.router.navigate(["../"],{relativeTo:this.route}),1500)},error:e=>{this.errorMessage=e}}):this.employeeService.create(this.employee).pipe(g()).subscribe({next:e=>{this.successMessage="Employee added successfully. An onboarding workflow has been created.",setTimeout(()=>this.router.navigate(["../"],{relativeTo:this.route}),1500)},error:e=>{this.errorMessage=e}})}catch(e){this.errorMessage="An unexpected error occurred. Please try again.",console.error(e)}}cancel(){this.submitted=!1,this.clearMessages(),this.location.back()}isAdmin(){return this.accountService.accountValue?.role===ce.Admin}generateEmployeeId(){if(this.allEmployees.length===0){this.employee.employeeId="EMP001";return}let e=0,r="EMP";this.allEmployees.forEach(d=>{if(d.employeeId&&d.employeeId.startsWith(r)){let w=d.employeeId.substring(r.length),M=parseInt(w,10);!isNaN(M)&&M>e&&(e=M)}});let a=(e+1).toString().padStart(3,"0");this.employee.employeeId=`${r}${a}`}loadEmployeesForFiltering(){this.employeeService.getAll().pipe(g()).subscribe({next:e=>{this.allEmployees=e,this.filterAvailableUsers()},error:e=>this.alertService.error("Error loading employees: "+e)})}filterAvailableUsers(){let e=this.allEmployees.filter(r=>r.id!==parseInt(this.id||"0")).map(r=>r.userId);if(this.availableUsers=this.users.filter(r=>{let t=r.isActive!==!1,a=!e.includes(r.id),d=this.employee.userId===r.id;return t&&(a||d)}),console.log("Available users for selection:",this.availableUsers),this.isEditMode&&this.employee.userId){let r=this.users.find(t=>t.id===this.employee.userId);r&&!this.availableUsers.some(t=>t.id===r.id)&&this.availableUsers.push(r)}}isFormInvalid(){return!this.employee.employeeId||!this.employee.userId||!this.employee.position||!this.employee.departmentId||!this.employee.hireDate||!this.employee.status}clearError(){this.errorMessage=""}clearSuccess(){this.successMessage=""}clearMessages(){this.errorMessage="",this.successMessage=""}static{this.\u0275fac=function(r){return new(r||n)(u(P),u(K),u(x),u(F),u(Q),u(V),u(le))}}static{this.\u0275cmp=A({type:n,selectors:[["app-add-edit"]],decls:70,vars:41,consts:[[1,"card"],[1,"card-header","bg-light"],[1,"mb-0"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success alert-dismissible fade show",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],["type","text",1,"form-control",3,"ngModelChange","ngModel","disabled","title","ngClass"],["class","form-text text-muted",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],[1,"form-label","d-block"],[1,"form-select","form-control",3,"ngModelChange","ngModel","ngClass"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],["type","text","placeholder","Enter position",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["type","date",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"text-center","mt-4"],[1,"btn","btn-primary",3,"click"],[2,"display","inline-block","width","10px"],[1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger"],["type","button",1,"btn-close","float-end",3,"click"],[1,"alert","alert-success","alert-dismissible","fade","show"],["type","button",1,"btn-close",3,"click"],[1,"invalid-feedback"],[3,"value"],[4,"ngIf"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"div",1)(2,"h4",2),l(3),i()(),o(4,"div",3),f(5,Ie,5,1,"div",4)(6,Ce,3,1,"div",5),o(7,"div",6)(8,"label",7),l(9,"Employee ID "),o(10,"span",8),l(11,"*"),i()(),o(12,"input",9),C("ngModelChange",function(d){return I(t.employee.employeeId,d)||(t.employee.employeeId=d),d}),i(),f(13,xe,2,0,"small",10)(14,we,2,0,"div",11),i(),o(15,"div",6)(16,"label",12),l(17,"Account "),o(18,"span",8),l(19,"*"),i()(),o(20,"select",13),C("ngModelChange",function(d){return I(t.employee.userId,d)||(t.employee.userId=d),d}),o(21,"option",14),l(22,"-- Select Account --"),i(),f(23,De,3,4,"option",15),i(),o(24,"small",16),l(25," Only active and unassigned accounts are available for selection. "),i(),f(26,Ae,2,0,"div",11),i(),o(27,"div",6)(28,"label",7),l(29,"Position "),o(30,"span",8),l(31,"*"),i()(),o(32,"input",17),C("ngModelChange",function(d){return I(t.employee.position,d)||(t.employee.position=d),d}),i(),f(33,ke,2,0,"div",11),i(),o(34,"div",6)(35,"label",12),l(36,"Department "),o(37,"span",8),l(38,"*"),i()(),o(39,"select",13),C("ngModelChange",function(d){return I(t.employee.departmentId,d)||(t.employee.departmentId=d),d}),o(40,"option",14),l(41,"-- Select Department --"),i(),f(42,Te,2,2,"option",15),i(),f(43,Ne,2,0,"div",11),i(),o(44,"div",6)(45,"label",7),l(46,"Hire Date "),o(47,"span",8),l(48,"*"),i()(),o(49,"input",18),C("ngModelChange",function(d){return I(t.employee.hireDate,d)||(t.employee.hireDate=d),d}),i(),f(50,Pe,2,0,"div",11),i(),o(51,"div",6)(52,"label",12),l(53,"Status "),o(54,"span",8),l(55,"*"),i()(),o(56,"select",13),C("ngModelChange",function(d){return I(t.employee.status,d)||(t.employee.status=d),d}),o(57,"option",14),l(58,"-- Select Status --"),i(),o(59,"option"),l(60,"Active"),i(),o(61,"option"),l(62,"Inactive"),i()(),f(63,Ve,2,0,"div",11),i(),o(64,"div",19)(65,"button",20),h("click",function(){return t.save()}),l(66,"Save"),i(),y(67,"span",21),o(68,"button",22),h("click",function(){return t.cancel()}),l(69,"Cancel"),i()()()()),r&2&&(s(3),k("",t.id?"EDIT":"ADD"," EMPLOYEE"),s(2),m("ngIf",t.errorMessage),s(),m("ngIf",t.successMessage),s(6),S("ngModel",t.employee.employeeId),m("disabled",!!t.id||!t.isAdmin())("title",t.isAdmin()?"":"Only admins can change employee IDs")("ngClass",D(29,O,t.submitted&&!t.employee.employeeId)),s(),m("ngIf",!t.id),s(),m("ngIf",t.submitted&&!t.employee.employeeId),s(6),S("ngModel",t.employee.userId),m("ngClass",D(31,O,t.submitted&&!t.employee.userId)),s(),m("ngValue",null),s(2),m("ngForOf",t.availableUsers),s(3),m("ngIf",t.submitted&&!t.employee.userId),s(6),S("ngModel",t.employee.position),m("ngClass",D(33,O,t.submitted&&!t.employee.position)),s(),m("ngIf",t.submitted&&!t.employee.position),s(6),S("ngModel",t.employee.departmentId),m("ngClass",D(35,O,t.submitted&&!t.employee.departmentId)),s(),m("ngValue",null),s(2),m("ngForOf",t.departments),s(),m("ngIf",t.submitted&&!t.employee.departmentId),s(6),S("ngModel",t.employee.hireDate),m("ngClass",D(37,O,t.submitted&&!t.employee.hireDate)),s(),m("ngIf",t.submitted&&!t.employee.hireDate),s(6),S("ngModel",t.employee.status),m("ngClass",D(39,O,t.submitted&&!t.employee.status)),s(),m("ngValue",null),s(6),m("ngIf",t.submitted&&!t.employee.status))},dependencies:[$,T,N,Y,G,de,z,H,J],styles:[`.form-label[_ngcontent-%COMP%] {
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
    }
    
    .form-select[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%] {
        padding: 0.5rem;
        border-radius: 0.25rem;
        border: 1px solid #ced4da;
        background-color: #fff;
        height: 38px;
        width: 100%;
    }
    
    .form-select[_ngcontent-%COMP%] {
        appearance: auto;
        -webkit-appearance: auto;
    }
    
    .card-header[_ngcontent-%COMP%] {
        border-bottom: 1px solid rgba(0,0,0,.125);
    }
    
    .invalid-feedback[_ngcontent-%COMP%] {
        display: block;
        width: 100%;
        margin-top: 0.25rem;
        font-size: 80%;
        color: #dc3545;
    }
    
    .is-invalid[_ngcontent-%COMP%] {
        border-color: #dc3545;
    }
    
    .text-danger[_ngcontent-%COMP%] {
        color: #dc3545;
    }
    
    .btn-close[_ngcontent-%COMP%] {
        background: transparent;
        border: 0;
        font-size: 1.5rem;
        padding: 0.25rem;
        cursor: pointer;
        opacity: 0.5;
    }
    
    .btn-close[_ngcontent-%COMP%]:hover {
        opacity: 1;
    }
    
    .float-end[_ngcontent-%COMP%] {
        float: right;
    }`]})}}return n})();function Fe(n,p){if(n&1){let e=E();o(0,"button",9),h("click",function(){_(e);let t=c();return v(t.add())}),y(1,"i",10),l(2," Add Employee "),i()}}function Oe(n,p){n&1&&(o(0,"div",11),y(1,"div",12),o(2,"p",13),l(3,"Loading data..."),i()())}function Le(n,p){if(n&1){let e=E();o(0,"div",14)(1,"p"),l(2),i(),o(3,"button",9),h("click",function(){_(e);let t=c();return v(t.retry())}),l(4,"Retry"),i()()}if(n&2){let e=c();s(2),b(e.error)}}function We(n,p){if(n&1){let e=E();o(0,"button",9),h("click",function(){_(e);let t=c(2);return v(t.add())}),y(1,"i",10),l(2," Add Employee "),i()}}function je(n,p){if(n&1&&(o(0,"div",15)(1,"p"),l(2,"No employees found. Please add an employee to get started."),i(),f(3,We,3,0,"button",4),i()),n&2){let e,r=c();s(3),m("ngIf",((e=r.account())==null?null:e.role)==="Admin")}}function Ue(n,p){if(n&1){let e=E();o(0,"button",31),h("click",function(){_(e);let t=c().$implicit,a=c(2);return v(a.delete(t.id))}),y(1,"i",32),l(2," Delete"),i()}}function Re(n,p){if(n&1){let e=E();o(0,"tr")(1,"td"),l(2),i(),o(3,"td"),l(4),i(),o(5,"td"),l(6),i(),o(7,"td"),l(8),i(),o(9,"td"),l(10),re(11,"date"),i(),o(12,"td")(13,"span",19),y(14,"i",20),l(15),i()(),o(16,"td",21)(17,"button",22),h("click",function(){let t=_(e).$implicit,a=c(2);return v(a.viewRequests(t.id))}),y(18,"i",23),l(19," Requests"),i(),o(20,"button",24),h("click",function(){let t=_(e).$implicit,a=c(2);return v(a.viewWorkflows(t.id))}),y(21,"i",25),l(22," Workflows"),i(),o(23,"button",26),h("click",function(){let t=_(e).$implicit,a=c(2);return v(a.transfer(t))}),y(24,"i",27),l(25," Transfer"),i(),o(26,"button",28),h("click",function(){let t=_(e).$implicit,a=c(2);return v(a.edit(t.id))}),y(27,"i",29),l(28," Edit"),i(),f(29,Ue,3,0,"button",30),i()()}if(n&2){let e,r=p.$implicit,t=c(2);s(2),b(r.employeeId),s(2),b(t.getUserEmail(r.userId)),s(2),b(r.position),s(2),b(t.getDepartmentName(r.departmentId)),s(2),b(oe(11,9,r.hireDate,"shortDate")),s(3),m("ngClass",r.status==="Active"?"active":"deactivated"),s(),m("ngClass",r.status==="Active"?"fa-check-circle":"fa-times-circle"),s(),k(" ",r.status," "),s(14),m("ngIf",((e=t.account())==null?null:e.role)==="Admin")}}function qe(n,p){if(n&1&&(o(0,"div",16)(1,"table",17)(2,"thead")(3,"tr")(4,"th"),l(5,"Employee ID"),i(),o(6,"th"),l(7,"User"),i(),o(8,"th"),l(9,"Position"),i(),o(10,"th"),l(11,"Department"),i(),o(12,"th"),l(13,"Hire Date"),i(),o(14,"th"),l(15,"Status"),i(),o(16,"th"),l(17,"Actions"),i()()(),o(18,"tbody"),f(19,Re,30,12,"tr",18),i()()()),n&2){let e=c();s(19),m("ngForOf",e.employees)}}var ve=(()=>{class n{constructor(e,r,t,a,d){this.employeeService=e,this.accountService=r,this.departmentService=t,this.alertService=a,this.router=d,this.employees=[],this.users=[],this.departments=[],this.loading=!1,this.error=""}ngOnInit(){this.loading=!0,this.loadAllData()}loadAllData(){j({employees:this.employeeService.getAll().pipe(U(e=>(console.error("Error loading employees:",e),this.error="Failed to load employees. Please try again.",W([])))),users:this.accountService.getAll().pipe(U(e=>(console.error("Error loading users:",e),W([])))),departments:this.departmentService.getAll().pipe(U(e=>(console.error("Error loading departments:",e),W([]))))}).pipe(g()).subscribe({next:e=>{this.employees=e.employees||[],this.users=e.users||[],this.departments=e.departments||[],this.loading=!1,console.log("All data loaded successfully",{employees:this.employees.length,users:this.users.length,departments:this.departments.length}),this.employees.length>0&&(this.error="")},error:e=>{this.error="Failed to load data. Please try again.",this.alertService.error(this.error),this.loading=!1,console.error("Error in forkJoin:",e)}})}fetchEmployees(){this.loading=!0,this.employeeService.getAll().pipe(g()).subscribe({next:e=>{this.employees=e,this.loading=!1,this.error=""},error:e=>{this.error="Failed to load employees",this.alertService.error(this.error),this.loading=!1,console.error("Error fetching employees:",e)}})}retry(){this.error="",this.loadAllData()}account(){return this.accountService.accountValue}edit(e){this.router.navigate(["/admin/employees/edit",e])}add(){this.router.navigate(["/admin/employees/add"])}transfer(e){this.router.navigate(["/admin/employees/transfer",e.id])}delete(e){confirm("Are you sure you want to delete this employee?")&&this.employeeService.delete(e).pipe(g()).subscribe({next:()=>{this.alertService.success("Employee deleted"),this.fetchEmployees()},error:r=>{console.error("Error deleting employee:",r),this.alertService.error("Failed to delete employee")}})}getUserEmail(e){if(!e)return"No User Assigned";let r=e.toString(),t=this.users.find(a=>a.id&&a.id.toString()===r);return t?t.email:`Unknown User (ID: ${e})`}getDepartmentName(e){if(!e)return"No Department";let r=Number(e),t=this.departments.find(a=>Number(a.id)===r);return t?t.name:`Unknown Department (ID: ${e})`}viewWorkflows(e){this.router.navigate(["/admin/workflows"],{queryParams:{employeeId:e}})}viewRequests(e){this.router.navigate(["/admin/requests"],{queryParams:{employeeId:e}})}static{this.\u0275fac=function(r){return new(r||n)(u(x),u(Q),u(F),u(V),u(P))}}static{this.\u0275cmp=A({type:n,selectors:[["app-list"]],decls:11,vars:5,consts:[[1,"employees-container"],[1,"employees-card"],[1,"employees-header"],[1,"fas","fa-user-tie"],["class","employees-btn-create",3,"click",4,"ngIf"],["class","employees-loading",4,"ngIf"],["class","employees-error",4,"ngIf"],["class","employees-empty",4,"ngIf"],["class","employees-table-wrapper",4,"ngIf"],[1,"employees-btn-create",3,"click"],[1,"fas","fa-user-plus"],[1,"employees-loading"],["role","status",1,"spinner-border","text-primary"],[1,"mt-2"],[1,"employees-error"],[1,"employees-empty"],[1,"employees-table-wrapper"],[1,"employees-table"],[4,"ngFor","ngForOf"],[1,"employees-badge",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"employees-actions"],[1,"employees-btn","requests",3,"click"],[1,"fas","fa-envelope-open-text"],[1,"employees-btn","workflows",3,"click"],[1,"fas","fa-project-diagram"],[1,"employees-btn","transfer",3,"click"],[1,"fas","fa-exchange-alt"],[1,"employees-btn","edit",3,"click"],[1,"fas","fa-edit"],["class","employees-btn delete",3,"click",4,"ngIf"],[1,"employees-btn","delete",3,"click"],[1,"fas","fa-trash"]],template:function(r,t){if(r&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),y(4,"i",3),l(5," Employees"),i(),f(6,Fe,3,0,"button",4),i(),f(7,Oe,4,0,"div",5)(8,Le,5,1,"div",6)(9,je,4,1,"div",7)(10,qe,20,1,"div",8),i()()),r&2){let a;s(6),m("ngIf",((a=t.account())==null?null:a.role)==="Admin"),s(),m("ngIf",t.loading),s(),m("ngIf",t.error),s(),m("ngIf",!t.loading&&!t.error&&(t.employees==null?null:t.employees.length)===0),s(),m("ngIf",!t.loading&&!t.error&&(t.employees==null?null:t.employees.length)>0)}},dependencies:[$,T,N,se],encapsulation:2})}}return n})();function Be(n,p){if(n&1&&(o(0,"div",15),l(1),i()),n&2){let e=c();s(),b(e.errorMessage)}}function $e(n,p){n&1&&(o(0,"div",16),l(1," You must select a different department than the current one. "),i())}function He(n,p){if(n&1&&(o(0,"option",17),l(1),i()),n&2){let e=p.$implicit,r=c();m("value",e.id)("disabled",e.id===(r.employee==null?null:r.employee.departmentId)),s(),B(" ",e.name," ",e.id===(r.employee==null?null:r.employee.departmentId)?"(Current)":""," ")}}var be=(()=>{class n{constructor(e,r,t,a,d,w){this.router=e,this.route=r,this.employeeService=t,this.departmentService=a,this.workflowService=d,this.alertService=w,this.employee={},this.departments=[],this.currentDepartmentName=""}ngOnInit(){this.id=this.route.snapshot.params.id,j({employee:this.employeeService.getById(this.id),departments:this.departmentService.getAll()}).pipe(g()).subscribe({next:({employee:e,departments:r})=>{if(this.employee=e,this.departments=r,e&&e.departmentId){let t=r.find(a=>Number(a.id)===Number(e.departmentId));t?(this.currentDepartmentName=t.name,console.log(`Current department set to: ${this.currentDepartmentName} (ID: ${e.departmentId})`)):(console.error(`Department with ID ${e.departmentId} not found in the departments list:`,r),this.currentDepartmentName=`Unknown (ID: ${e.departmentId})`,this.departmentService.getById(e.departmentId.toString()).pipe(g()).subscribe({next:a=>{a&&(this.currentDepartmentName=a.name,console.log(`Retrieved department name: ${a.name}`))},error:a=>console.error("Error fetching department:",a)})),this.newDepartmentId=this.findDifferentDepartment(e.departmentId),console.log(`Current department ID: ${e.departmentId}, Selected new department ID: ${this.newDepartmentId}`)}else console.warn("Employee has no department ID assigned"),this.currentDepartmentName="No Department Assigned"},error:e=>{this.errorMessage="Could not load employee or department data",console.error("Error loading data:",e)}})}findDifferentDepartment(e){if(this.departments.length>0){let r=this.departments.find(t=>Number(t.id)!==Number(e));return r?r.id:null}return null}transfer(){if(!this.newDepartmentId){this.errorMessage="Please select a new department";return}let e=Number(this.employee.departmentId),r=Number(this.newDepartmentId);if(e===r){this.errorMessage="Cannot transfer to the same department. Please select a different department.";return}let t=this.currentDepartmentName,a=this.departments.find(d=>Number(d.id)===r)?.name||"New Department";this.errorMessage="",this.employeeService.update(this.id,te(ee({},this.employee),{departmentId:this.newDepartmentId})).pipe(g()).subscribe({next:d=>{console.log("Employee department updated successfully");let w={employeeId:parseInt(this.id),type:"Transfer",details:{from:t,to:a},status:"Pending"};this.workflowService.create(w).pipe(g()).subscribe({next:()=>{this.alertService.success("Employee transferred successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/admin/employees"])},error:M=>{console.error("Error creating workflow:",M),this.alertService.success("Employee transferred successfully but workflow creation failed",{keepAfterRouteChange:!0}),this.router.navigate(["/admin/employees"])}})},error:d=>{this.errorMessage="Could not transfer employee: "+(d.message||d),console.error("Error transferring employee:",d)}})}static{this.\u0275fac=function(r){return new(r||n)(u(P),u(K),u(x),u(F),u(ue),u(V))}}static{this.\u0275cmp=A({type:n,selectors:[["app-transfer"]],decls:25,vars:7,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"mb-3"],[1,"form-label"],["type","text","disabled","",1,"form-control",3,"value"],[1,"form-label","d-block"],[1,"form-select","w-100",3,"ngModelChange","ngModel"],[3,"value","disabled",4,"ngFor","ngForOf"],[1,"text-center","mt-4"],[1,"btn","btn-primary",3,"click","disabled"],[2,"display","inline-block","width","10px"],["routerLink","/admin/employees",1,"btn","btn-secondary"],[1,"alert","alert-danger"],[1,"alert","alert-warning"],[3,"value","disabled"]],template:function(r,t){r&1&&(o(0,"div",0)(1,"div",1),l(2,"Transfer Employee"),i(),o(3,"div",2),f(4,Be,2,1,"div",3)(5,$e,2,0,"div",4),o(6,"div",5)(7,"label",6),l(8,"Employee"),i(),y(9,"input",7),i(),o(10,"div",5)(11,"label",6),l(12,"Current Department"),i(),y(13,"input",7),i(),o(14,"div",5)(15,"label",8),l(16,"New Department"),i(),o(17,"select",9),C("ngModelChange",function(d){return I(t.newDepartmentId,d)||(t.newDepartmentId=d),d}),f(18,He,2,4,"option",10),i()(),o(19,"div",11)(20,"button",12),h("click",function(){return t.transfer()}),l(21,"Transfer"),i(),y(22,"span",13),o(23,"button",14),l(24,"Cancel"),i()()()()),r&2&&(s(4),m("ngIf",t.errorMessage),s(),m("ngIf",t.newDepartmentId===(t.employee==null?null:t.employee.departmentId)&&t.newDepartmentId!==null),s(4),m("value",t.employee==null?null:t.employee.employeeId),s(4),m("value",t.currentDepartmentName),s(4),S("ngModel",t.newDepartmentId),s(),m("ngForOf",t.departments),s(2),m("disabled",t.newDepartmentId===(t.employee==null?null:t.employee.departmentId)||!t.newDepartmentId))},dependencies:[T,N,Y,G,z,H,J,pe],styles:[`.form-label[_ngcontent-%COMP%] {
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
    }
    
    .form-select[_ngcontent-%COMP%] {
        padding: 0.5rem;
        border-radius: 0.25rem;
        border: 1px solid #ced4da;
        background-color: #fff;
        height: 38px;
        width: 100%;
        appearance: auto;
        -webkit-appearance: auto;
    }`]})}}return n})();var Je=[{path:"",component:ve},{path:"add",component:Z},{path:"edit/:id",component:Z},{path:"transfer/:id",component:be}],Ee=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=q({type:n})}static{this.\u0275inj=R({imports:[L.forChild(Je),L]})}}return n})();var bt=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=q({type:n})}static{this.\u0275inj=R({providers:[x],imports:[ae,me,L,Ee]})}}return n})();export{bt as EmployeesModule};
