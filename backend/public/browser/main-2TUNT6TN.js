import{a as te,b as M,c as oe,d as ie,f as ne}from"./chunk-JTRDO5AI.js";import{A as p,Aa as Y,Ba as Z,Ca as K,D as y,Da as X,E,Ea as w,F as m,Fa as q,Ga as f,H as s,Ha as h,Ia as k,J as O,Ja as ee,P as F,Q as j,V as $,X as P,Y as B,Z as I,aa as U,ba as V,ca as v,da as z,ea as G,fa as J,k as L,l as N,m as _,o as u,p as S,q as x,r as b,s as D,t as a,u as l,v as d,w as c,x as H,xa as W,y as r,ya as Q,z as n}from"./chunk-5BKUYLAT.js";var se=(()=>{class e{constructor(t){this.accountService=t,this.account=this.accountService.accountValue}static{this.\u0275fac=function(o){return new(o||e)(l(f))}}static{this.\u0275cmp=u({type:e,selectors:[["ng-component"]],decls:8,vars:1,consts:[[1,"home-container"],[1,"home-card"],[1,"home-icon"],[1,"fas","fa-user-shield"],[1,"home-subtitle"]],template:function(o,i){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),p(3,"i",3),n(),r(4,"h1"),s(5),n(),r(6,"p",4),s(7,"You're logged in with Angular 10 & JWT!!"),n()()()),o&2&&(a(5),O("Hi ",i.account.firstName,"!"))},encapsulation:2})}}return e})();var ue=()=>import("./chunk-BOJWYGYP.js").then(e=>e.AccountModule),de=()=>import("./chunk-ZBBS3JL3.js").then(e=>e.AdminModule),fe=()=>import("./chunk-KIWFOQGF.js").then(e=>e.ProfileModule),ve=[{path:"",component:se,canActivate:[M]},{path:"account",loadChildren:ue},{path:"profile",loadChildren:fe,canActivate:[M]},{path:"admin",loadChildren:de,canActivate:[M],data:{roles:[k.Admin]}},{path:"**",redirectTo:""}],ae=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=_({imports:[w.forRoot(ve),w]})}}return e})();var ce=(()=>{class e{intercept(t,o){if(console.log("-------------------------"),console.log("DEBUG REQUEST:"),console.log(`URL: ${t.url}`),console.log(`Method: ${t.method}`),t.headers.has("Authorization")){let i=t.headers.get("Authorization");if(console.log(`Auth Header: ${i.substring(0,15)}...`),i&&i.startsWith("Bearer ")){let R=i.substring(7);try{let A=R.split(".");if(A.length===3){let T=JSON.parse(atob(A[1]));console.log("Token payload:",T),console.log("Token expiration:",new Date(T.exp*1e3).toISOString()),console.log("Current time:",new Date().toISOString()),console.log("Token expired:",new Date(T.exp*1e3)<new Date)}}catch(A){console.log("Could not decode token",A)}}}else console.log("No Authorization header present");return console.log("Body:",t.body),console.log("-------------------------"),o.handle(t).pipe(L({next:i=>{i instanceof U&&(console.log("-------------------------"),console.log("DEBUG RESPONSE:"),console.log(`URL: ${t.url}`),console.log(`Status: ${i.status}`),console.log("Body:",i.body),console.log("-------------------------"))},error:i=>{i instanceof V&&(console.log("-------------------------"),console.log("DEBUG ERROR RESPONSE:"),console.log(`URL: ${t.url}`),console.log(`Status: ${i.status}`),console.log(`Error message: ${i.message}`),console.log("Error details:",i.error),console.log("-------------------------"))}}))}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=N({token:e,factory:e.\u0275fac})}}return e})();function Ce(e,C){if(e&1){let t=y();r(0,"div")(1,"a",4),E("click",function(){let i=x(t).$implicit,R=m(2);return b(R.removeAlert(i))}),s(2,"\xD7"),n(),p(3,"span",5),n()}if(e&2){let t=C.$implicit,o=m(2);H(o.cssClasses(t)),a(3),c("innerHTML",t.message,D)}}function Ae(e,C){if(e&1&&(r(0,"div",1)(1,"div",2),d(2,Ce,4,4,"div",3),n()()),e&2){let t=m();a(2),c("ngForOf",t.alerts)}}var le=(()=>{class e{constructor(t,o){this.router=t,this.alertService=o,this.id="default-alert",this.fade=!0,this.alerts=[]}ngOnInit(){this.alertSubscription=this.alertService.onAlert(this.id).subscribe(t=>{if(!t.message){this.alerts=this.alerts.filter(o=>o.keepAfterRouteChange),this.alerts.forEach(o=>delete o.keepAfterRouteChange);return}this.alerts.push(t),t.autoClose&&setTimeout(()=>this.removeAlert(t),3e3)}),this.routeSubscription=this.router.events.subscribe(t=>{t instanceof Q&&this.alertService.clear(this.id)})}ngOnDestroy(){this.alertSubscription.unsubscribe(),this.routeSubscription.unsubscribe()}removeAlert(t){this.alerts.includes(t)&&(this.fade?(t.fade=!0,setTimeout(()=>{this.alerts=this.alerts.filter(o=>o!==t)},250)):this.alerts=this.alerts.filter(o=>o!==t))}cssClasses(t){if(!t)return;let o=["alert","alert-dismissible"],i={[h.Success]:"alert alert-success",[h.Error]:"alert alert-danger",[h.Info]:"alert alert-info",[h.Warning]:"alert alert-warning"};return o.push(i[t.type]),t.fade&&o.push("fade"),o.join(" ")}static{this.\u0275fac=function(o){return new(o||e)(l(Z),l(ee))}}static{this.\u0275cmp=u({type:e,selectors:[["alert"]],inputs:{id:"id",fade:"fade"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"m-3"],[3,"class",4,"ngFor","ngForOf"],[1,"close",3,"click"],[3,"innerHTML"]],template:function(o,i){o&1&&d(0,Ae,3,1,"div",0),o&2&&c("ngIf",i.alerts.length)},dependencies:[B,I],encapsulation:2})}}return e})();var Se=e=>({"bg-light":e}),xe=()=>({exact:!0});function be(e,C){e&1&&(r(0,"a",11),s(1,"Admin"),n())}function ye(e,C){if(e&1){let t=y();r(0,"nav",2)(1,"div",3)(2,"span",4),p(3,"i",5),s(4," UserMgmt"),n(),r(5,"a",6),s(6,"Home"),n(),r(7,"a",7),s(8,"Profile"),n(),d(9,be,2,0,"a",8),n(),r(10,"div",9)(11,"a",10),E("click",function(){x(t);let i=m();return b(i.logout())}),s(12,"Logout"),n()()()}if(e&2){let t=m();a(5),c("routerLinkActiveOptions",F(2,xe)),a(4),c("ngIf",t.account.role===t.Role.Admin)}}var pe=(()=>{class e{constructor(t){this.accountService=t,this.Role=k,this.accountService.account.subscribe(o=>this.account=o)}logout(){this.accountService.logout()}static{this.\u0275fac=function(o){return new(o||e)(l(f))}}static{this.\u0275cmp=u({type:e,selectors:[["app"]],decls:4,vars:4,consts:[[1,"app-container",3,"ngClass"],["class","main-navbar",4,"ngIf"],[1,"main-navbar"],[1,"navbar-left"],[1,"navbar-brand"],[1,"fas","fa-cubes"],["routerLink","/","routerLinkActive","active",1,"nav-item","nav-link",3,"routerLinkActiveOptions"],["routerLink","/profile","routerLinkActive","active",1,"nav-item","nav-link"],["routerLink","/admin","routerLinkActive","active","class","nav-item nav-link",4,"ngIf"],[1,"navbar-right"],[1,"nav-item","nav-link",3,"click"],["routerLink","/admin","routerLinkActive","active",1,"nav-item","nav-link"]],template:function(o,i){o&1&&(r(0,"div",0),d(1,ye,13,3,"nav",1),p(2,"alert")(3,"router-outlet"),n()),o&2&&(c("ngClass",j(2,Se,i.account)),a(),c("ngIf",i.account))},dependencies:[P,I,Y,K,X,le],encapsulation:2})}}return e})();var me=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=S({type:e,bootstrap:[pe]})}static{this.\u0275inj=_({providers:[{provide:$,useFactory:te,multi:!0,deps:[f]},{provide:v,useClass:ce,multi:!0},{provide:v,useClass:ie,multi:!0},{provide:v,useClass:oe,multi:!0},{provide:v,useClass:ne,multi:!0}],imports:[J,W,z,ae]})}}return e})();q.production&&void 0;G().bootstrapModule(me).catch(e=>console.error(e));
